# æ‹¼å›¾æ£‹ç›˜æ¸¸æˆ - å®Œæ•´é¡¹ç›®æ–‡æ¡£

æ–‡æ¡£å·²è¿‡æœŸ,éœ€è¦é‡æ–°ä¿®è®¢æ–‡æ¡£.

> **ç‰ˆæœ¬**: v1.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-10-17  
> **çŠ¶æ€**: âœ… MVP å®Œæˆï¼Œå¯ç©æµ‹è¯•ç‰ˆ

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ¸¸æˆè§„åˆ™](#æ¸¸æˆè§„åˆ™)
3. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
4. [ä»£ç ç»“æ„](#ä»£ç ç»“æ„)
5. [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
6. [API æ–‡æ¡£](#api-æ–‡æ¡£)
7. [æµ‹è¯•è¯´æ˜](#æµ‹è¯•è¯´æ˜)
8. [ç‰ˆæœ¬å†å²](#ç‰ˆæœ¬å†å²)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹

**æ‹¼å›¾æ£‹ç›˜æ¸¸æˆï¼ˆPuzzle Chessï¼‰** æ˜¯ä¸€æ¬¾åŒäººå›åˆåˆ¶ç­–ç•¥æ¸¸æˆï¼Œç©å®¶éœ€è¦å°†å·±æ–¹çš„æ‹¼å›¾å½¢çŠ¶æ£‹å­ä»èµ·å§‹ä½ç½®ç§»åŠ¨åˆ°å¯¹æ–¹çš„èµ·å§‹åŒºåŸŸã€‚æ¸¸æˆç®€æ´æ˜“æ‡‚ï¼Œä½†å……æ»¡ç­–ç•¥æ€§ã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 6.0.3
- **è·¯ç”±**: Vue Router 4.5.0
- **çŠ¶æ€ç®¡ç†**: æ— éœ€ Piniaï¼ˆä½¿ç”¨ OOP ç±»ç®¡ç†çŠ¶æ€ï¼‰
- **æµ‹è¯•**: Vitest
- **å¼€å‘ç¯å¢ƒ**: VS Code + Node.js 18+

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ puzzle.ts              # ç®€å•æ‹¼å›¾ç±»å‹ï¼ˆPhase 1ï¼‰
â”‚   â””â”€â”€ chess/                 # æ£‹ç›˜æ¸¸æˆç±»å‹ï¼ˆPhase 2ï¼‰âœ…
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ classes/
â”‚   â”œâ”€â”€ Puzzle*.ts             # ç®€å•æ‹¼å›¾é€»è¾‘
â”‚   â””â”€â”€ chess/                 # æ£‹ç›˜æ¸¸æˆæ ¸å¿ƒç±» âœ…
â”‚       â”œâ”€â”€ EdgeMatcher.ts     # è¾¹ç¼˜åŒ¹é…ï¼ˆæš‚æœªå¯ç”¨ï¼‰
â”‚       â”œâ”€â”€ MoveValidator.ts   # ç§»åŠ¨éªŒè¯
â”‚       â”œâ”€â”€ Board.ts           # æ£‹ç›˜ç®¡ç†
â”‚       â”œâ”€â”€ GameEngine.ts      # æ¸¸æˆå¼•æ“
â”‚       â”œâ”€â”€ PieceManager.ts    # æ£‹å­ç®¡ç†
â”‚       â””â”€â”€ __tests__/         # å•å…ƒæµ‹è¯•
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ chess/                 # æ£‹ç›˜é…ç½® âœ…
â”‚       â”œâ”€â”€ pieces.ts          # æ£‹å­å®šä¹‰
â”‚       â””â”€â”€ board.ts           # æ£‹ç›˜å¸¸é‡
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PuzzleBoard.vue        # ç®€å•æ‹¼å›¾
â”‚   â””â”€â”€ chess/                 # æ£‹ç›˜æ¸¸æˆ UI âœ…
â”‚       â””â”€â”€ ChessBoard.vue
â”œâ”€â”€ views/
â”‚   â””â”€â”€ ChessView.vue          # æ£‹ç›˜æ¸¸æˆè§†å›¾ï¼ˆé¦–é¡µï¼‰âœ…
â””â”€â”€ router/
    â””â”€â”€ index.ts               # è·¯ç”±é…ç½®ï¼ˆé¦–é¡µ=æ£‹ç›˜ï¼‰âœ…
```

---

## æ¸¸æˆè§„åˆ™

### ğŸ¯ æ¸¸æˆç›®æ ‡

- **æ£‹ç›˜**: 4Ã—4 ç½‘æ ¼ï¼ˆ16 ä¸ªæ ¼å­ï¼‰
- **æ£‹å­**: æ¯æ–¹ 4 ä¸ªæ‹¼å›¾å½¢çŠ¶æ£‹å­
- **èµ·å§‹ä½ç½®**:
  - ç©å®¶ 1ï¼ˆè“è‰²ï¼‰ï¼šç¬¬ 0 è¡Œï¼ˆé¡¶éƒ¨ï¼‰
  - ç©å®¶ 2ï¼ˆçº¢è‰²ï¼‰ï¼šç¬¬ 3 è¡Œï¼ˆåº•éƒ¨ï¼‰
- **ç›®æ ‡**: å°†å·±æ–¹æ‰€æœ‰æ£‹å­ç§»è‡³å¯¹æ–¹èµ·å§‹è¡Œ
- **èƒœåˆ©æ¡ä»¶**: ç‡å…ˆå®Œæˆç›®æ ‡çš„ç©å®¶è·èƒœ

### â™Ÿï¸ æ ¸å¿ƒè§„åˆ™

#### 1. å›åˆåˆ¶

- æ¸¸æˆé‡‡ç”¨**è½®æµè¡ŒåŠ¨**åˆ¶
- æ¯å›åˆç©å®¶åªèƒ½æ‰§è¡Œ**ä¸€ä¸ªåŠ¨ä½œ**ï¼šç§»åŠ¨æ£‹å­æˆ–æ—‹è½¬æ£‹å­ï¼ˆä»…é¸Ÿç±»ï¼‰
- å®ŒæˆåŠ¨ä½œåï¼Œ**è‡ªåŠ¨åˆ‡æ¢**åˆ°å¯¹æ–¹å›åˆ

#### 2. ç§»åŠ¨è§„åˆ™

**ç§»åŠ¨èŒƒå›´**:
- å¯ç§»åŠ¨åˆ°æ£‹ç›˜ä¸Š**ä»»æ„ç©ºä½ç½®**ï¼ˆæ— è·ç¦»é™åˆ¶ï¼‰
- ç›®æ ‡æ ¼å­**å¿…é¡»ä¸ºç©º**ï¼ˆä¸å¯é‡å ï¼‰

**ç§»åŠ¨æ–¹å‘**:
- å¿…é¡»æ²¿**ç›´çº¿**æˆ–**å¯¹è§’çº¿**ç§»åŠ¨
- æ”¯æŒ **8 ä¸ªæ–¹å‘**: ä¸Šã€ä¸‹ã€å·¦ã€å³ã€å·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹

**ç¤ºä¾‹**:
```
âœ… åˆæ³•ç§»åŠ¨:
- ä» (0,0) ç§»åŠ¨åˆ° (0,3)  // æ°´å¹³ç›´çº¿
- ä» (0,0) ç§»åŠ¨åˆ° (3,0)  // å‚ç›´ç›´çº¿
- ä» (0,0) ç§»åŠ¨åˆ° (2,2)  // å¯¹è§’çº¿

âŒ éæ³•ç§»åŠ¨:
- ä» (0,0) ç§»åŠ¨åˆ° (1,2)  // ä¸æ˜¯ç›´çº¿æˆ–å¯¹è§’çº¿
- ç§»åŠ¨åˆ°å·²æœ‰æ£‹å­çš„ä½ç½®   // ä¸å¯é‡å 
```

#### 3. æ—‹è½¬è§„åˆ™

**ç›¸é‚»ç§»åŠ¨ï¼ˆè·ç¦» = 1 æ ¼ï¼‰**:
- âœ… ç§»åŠ¨åˆ°ç›¸é‚» 8 æ ¼ä¹‹ä¸€åï¼Œå¯é€‰æ‹©æ˜¯å¦æ—‹è½¬
- æ—‹è½¬è§’åº¦: 90Â° å¢é‡ï¼ˆ0Â°ã€90Â°ã€180Â°ã€270Â°ï¼‰
- âš ï¸ æ—‹è½¬åæœ¬æ¬¡ç§»åŠ¨ç»“æŸï¼Œåˆ‡æ¢å›åˆ

**è¿œè·ç¦»ç§»åŠ¨ï¼ˆè·ç¦» > 1 æ ¼ï¼‰**:
- âŒ ä¸èƒ½æ—‹è½¬ï¼Œåªèƒ½ç§»åŠ¨
- âœ… é€‚åˆå¿«é€Ÿå é¢†æˆ˜ç•¥ä½ç½®

**é¸Ÿç±»æ£‹å­ç‰¹æƒ**:
- ğŸ¦… å¯ä»¥åŸåœ°æ—‹è½¬ï¼ˆä¸ç§»åŠ¨ï¼‰
- âš ï¸ åŸåœ°æ—‹è½¬ä¹Ÿç®—ä¸€ä¸ªåŠ¨ä½œï¼Œä¼šç»“æŸå›åˆ

### ğŸ® æ“ä½œæŒ‡å—

| æ“ä½œ | æ–¹æ³• |
|------|------|
| é€‰æ‹©æ£‹å­ | ç‚¹å‡»å·±æ–¹æ£‹å­ï¼ˆé»„è‰²é«˜äº® + ç»¿è‰²å¯ç§»åŠ¨æç¤ºï¼‰ |
| ç§»åŠ¨æ£‹å­ | ç‚¹å‡»ç»¿è‰²æç¤ºçš„ç›®æ ‡æ ¼å­ |
| æ—‹è½¬æ£‹å­ | æŒ‰ `R` é”®æˆ–ç‚¹å‡»"æ—‹è½¬"æŒ‰é’® |
| å–æ¶ˆé€‰æ‹© | æŒ‰ `ESC` é”® |
| è·³è¿‡å›åˆ | ç‚¹å‡»"è·³è¿‡"æŒ‰é’® |

### âš¡ ç­–ç•¥è¦ç‚¹

1. **ä¸€å›åˆä¸€åŠ¨ä½œ**: éœ€è°¨æ…é€‰æ‹©ç§»åŠ¨æˆ–æ—‹è½¬
2. **è¿œè¿‘å¹³è¡¡**: è¿œè·ç¦»ç§»åŠ¨å¿«é€Ÿï¼Œç›¸é‚»ç§»åŠ¨çµæ´»
3. **é¸Ÿç±»ä¼˜åŠ¿**: å–„ç”¨é¸Ÿç±»çš„åŸåœ°æ—‹è½¬èƒ½åŠ›
4. **ä½ç½®å¡ä½**: å æ®å…³é”®ä½ç½®ï¼Œæ§åˆ¶å±€åŠ¿
5. **å¿«é€Ÿæ¨è¿›**: åˆ©ç”¨æ— è·ç¦»é™åˆ¶ï¼Œå¿«é€ŸæŠµè¾¾ç›®æ ‡

---

## æŠ€æœ¯æ¶æ„

### è®¾è®¡æ¨¡å¼

é¡¹ç›®é‡‡ç”¨ **é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰** èŒƒå¼ï¼Œæ ¸å¿ƒæ¸¸æˆé€»è¾‘å°è£…åœ¨ç±»ä¸­ï¼š

```typescript
// æ¸¸æˆå¼•æ“ - ç®¡ç†æ¸¸æˆçŠ¶æ€
class GameEngine {
  private gameState: GameState
  
  initializeGame(): void { }
  executeMove(piece, toPosition, rotation?): boolean { }
  switchTurn(): void { }
  checkWinCondition(): void { }
}

// ç§»åŠ¨éªŒè¯å™¨ - éªŒè¯ç§»åŠ¨åˆæ³•æ€§
class MoveValidator {
  static validateMove(piece, toPosition, board, rotation?): MoveValidation { }
  static getPossibleMoves(piece, board): Move[] { }
  static calculateChebyshevDistance(from, to): number { }
}

// æ£‹ç›˜ç®¡ç† - ç®¡ç†æ£‹ç›˜çŠ¶æ€
class Board {
  private cells: BoardCell[][]
  
  initializeBoard(): void { }
  getPieceAt(position): ChessPiece | null { }
  movePiece(from, to): boolean { }
}

// æ£‹å­ç®¡ç†å™¨ - åˆ›å»ºå’Œç®¡ç†æ£‹å­
class PieceManager {
  static createInitialPieces(player, startRows): ChessPiece[] { }
}
```

### æ ¸å¿ƒç±»å‹å®šä¹‰

```typescript
// ä½ç½®
interface Position {
  row: number
  col: number
}

// æ—‹è½¬è§’åº¦
type Rotation = 0 | 90 | 180 | 270

// æ£‹å­
interface ChessPiece {
  id: number
  shapeId: number        // 1-4ï¼ˆå¯¹åº” SVG èµ„æºï¼‰
  player: Player         // 1 æˆ– 2
  position: Position | null
  rotation: Rotation
  edges: EdgeConfig      // è¾¹ç¼˜é…ç½®ï¼ˆæš‚æœªä½¿ç”¨ï¼‰
  isOnBoard: boolean
  isBird: boolean        // æ˜¯å¦æ˜¯é¸Ÿç±»ï¼ˆèµ„æº 4ï¼‰
}

// æ¸¸æˆçŠ¶æ€
interface GameState {
  currentPlayer: Player
  board: BoardCell[][]
  player1Pieces: ChessPiece[]
  player2Pieces: ChessPiece[]
  moveHistory: Move[]
  winner: Player | null
  turnNumber: number
}

// æ£‹ç›˜æ ¼å­
interface BoardCell {
  position: Position
  pieces: ChessPiece[]   // æ”¯æŒå¤šæ£‹å­ï¼ˆå½“å‰è§„åˆ™ä¸å…è®¸é‡å ï¼‰
}
```

### è¾¹ç¼˜åŒ¹é…ç³»ç»Ÿï¼ˆæš‚æœªå¯ç”¨ï¼‰

é¡¹ç›®è®¾è®¡äº†è¾¹ç¼˜åŒ¹é…æœºåˆ¶ï¼Œä½†å½“å‰ç‰ˆæœ¬ä¸º**è‡ªç”±æ¨¡å¼**ï¼Œæœªå¯ç”¨æ­¤åŠŸèƒ½ã€‚

**è¾¹ç¼˜ç±»å‹**:
```typescript
type EdgeType = '1+' | '1-' | '1`+' | '1`-'

// åŒ¹é…è§„åˆ™
'1+'  â†â†’ '1-'   âœ“ ï¼ˆå‡¸é…å‡¹ï¼‰
'1`+' â†â†’ '1`-'  âœ“ ï¼ˆåå‡¸é…åå‡¹ï¼‰
'1+'  â†â†’ '1`-'  âœ— ï¼ˆç±»å‹ä¸åŒä¸åŒ¹é…ï¼‰
```

**4 ç§æ£‹å­å½¢çŠ¶**ï¼ˆæ¥è‡ª `/SVG/èµ„æº X.svg`ï¼‰:
- èµ„æº 1: `top:'1-'`, `right:'1\`-'`, `bottom:'1\`-'`, `left:'1-'`
- èµ„æº 2: `top:'1+'`, `right:'1-'`, `bottom:'1\`-'`, `left:'1\`+'`
- èµ„æº 3: `top:'1\`+'`, `right:'1-'`, `bottom:'1\`-'`, `left:'1+'`
- èµ„æº 4: `top:'1\`+'`, `right:'1+'`, `bottom:'1\`+'`, `left:'1+'` ï¼ˆé¸Ÿç±»ï¼‰

---

## ä»£ç ç»“æ„

### æ ¸å¿ƒç±»è¯¦è§£

#### 1. GameEngineï¼ˆæ¸¸æˆå¼•æ“ï¼‰

**èŒè´£**: ç®¡ç†æ¸¸æˆçŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ

**å…³é”®æ–¹æ³•**:
```typescript
class GameEngine {
  // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
  initializeGameState(): GameState
  
  // æ‰§è¡Œç§»åŠ¨ï¼ˆç§»åŠ¨åè‡ªåŠ¨åˆ‡æ¢å›åˆï¼‰
  executeMove(piece: ChessPiece, toPosition: Position, newRotation?: Rotation): boolean
  
  // åˆ‡æ¢å›åˆ
  switchTurn(): void
  
  // æ—‹è½¬æ£‹å­ï¼ˆä»…é¸Ÿç±»åŸåœ°æ—‹è½¬ï¼‰
  rotatePiece(piece: ChessPiece): boolean
  
  // æ£€æŸ¥èƒœåˆ©æ¡ä»¶
  private checkWinCondition(): void
  
  // æ‚”æ£‹
  undoMove(): boolean
}
```

**æ¸¸æˆçŠ¶æ€æµç¨‹**:
```
åˆå§‹åŒ– â†’ ç©å®¶1å›åˆ â†’ æ‰§è¡ŒåŠ¨ä½œ â†’ æ£€æŸ¥èƒœåˆ© â†’ åˆ‡æ¢å›åˆ â†’ ç©å®¶2å›åˆ â†’ ...
```

#### 2. MoveValidatorï¼ˆç§»åŠ¨éªŒè¯å™¨ï¼‰

**èŒè´£**: éªŒè¯ç§»åŠ¨åˆæ³•æ€§ï¼Œç”Ÿæˆå¯èƒ½çš„ç§»åŠ¨

**å…³é”®æ–¹æ³•**:
```typescript
class MoveValidator {
  // éªŒè¯ç§»åŠ¨
  static validateMove(
    piece: ChessPiece,
    toPosition: Position,
    board: BoardCell[][],
    newRotation?: Rotation
  ): MoveValidation
  
  // è·å–æ‰€æœ‰å¯èƒ½çš„ç§»åŠ¨
  static getPossibleMoves(
    piece: ChessPiece,
    board: BoardCell[][],
    includeRotations?: boolean
  ): Move[]
  
  // è®¡ç®—åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼ˆå«å¯¹è§’çº¿ï¼‰
  static calculateChebyshevDistance(from: Position, to: Position): number
  
  // è·å–ç§»åŠ¨æ–¹å‘
  static getDirection(from: Position, to: Position): Direction | null
}
```

**éªŒè¯æµç¨‹**:
```
1. æ£€æŸ¥æ£‹å­æ˜¯å¦åœ¨æ£‹ç›˜ä¸Š
2. æ£€æŸ¥ç›®æ ‡ä½ç½®æ˜¯å¦æœ‰æ•ˆ
3. æ£€æŸ¥æ˜¯å¦åŸåœ°æ—‹è½¬ï¼ˆä»…é¸Ÿç±»ï¼‰
4. è®¡ç®—è·ç¦»å’Œæ–¹å‘
5. æ£€æŸ¥ç›®æ ‡æ ¼å­æ˜¯å¦ä¸ºç©ºï¼ˆä¸å¯é‡å ï¼‰
6. æ£€æŸ¥æ—‹è½¬é™åˆ¶ï¼ˆè·ç¦» > 1 ä¸å¯æ—‹è½¬ï¼‰
7. è¿”å›éªŒè¯ç»“æœ
```

#### 3. Boardï¼ˆæ£‹ç›˜ç®¡ç†ï¼‰

**èŒè´£**: ç®¡ç†æ£‹ç›˜çŠ¶æ€å’Œæ£‹å­æ”¾ç½®

**å…³é”®æ–¹æ³•**:
```typescript
class Board {
  // åˆå§‹åŒ–æ£‹ç›˜
  initializeBoard(size: number): void
  
  // è·å–æŒ‡å®šä½ç½®çš„æ£‹å­
  getPieceAt(position: Position): ChessPiece | null
  
  // ç§»åŠ¨æ£‹å­
  movePiece(from: Position, to: Position): boolean
  
  // æ”¾ç½®æ£‹å­
  placePiece(piece: ChessPiece, position: Position): boolean
  
  // ç§»é™¤æ£‹å­
  removePiece(position: Position): ChessPiece | null
}
```

#### 4. PieceManagerï¼ˆæ£‹å­ç®¡ç†å™¨ï¼‰

**èŒè´£**: åˆ›å»ºå’Œç®¡ç†æ£‹å­

**å…³é”®æ–¹æ³•**:
```typescript
class PieceManager {
  // åˆ›å»ºåˆå§‹æ£‹å­
  static createInitialPieces(player: Player, startRows: number[]): ChessPiece[]
  
  // æ ¹æ®ç©å®¶å’Œå½¢çŠ¶IDåˆ›å»ºæ£‹å­
  private static createPiece(player: Player, shapeId: number, id: number): ChessPiece
}
```

**æ£‹å­åˆå§‹åŒ–**:
```typescript
// ç©å®¶ 1: ç¬¬ 0 è¡Œï¼Œ4 ä¸ªæ£‹å­
Player 1 Pieces: [
  { id: 0, shapeId: 1, position: {row: 0, col: 0} },
  { id: 1, shapeId: 2, position: {row: 0, col: 1} },
  { id: 2, shapeId: 3, position: {row: 0, col: 2} },
  { id: 3, shapeId: 4, position: {row: 0, col: 3}, isBird: true }
]

// ç©å®¶ 2: ç¬¬ 3 è¡Œï¼Œ4 ä¸ªæ£‹å­
Player 2 Pieces: [åŒä¸Šï¼Œrow: 3]
```

---

## å¼€å‘æŒ‡å—

### ç¯å¢ƒæ­å»º

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd puzzle-chess

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# 4. è¿è¡Œæµ‹è¯•
pnpm test:unit

# 5. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build
```

### å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm dev` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `pnpm build` | ç±»å‹æ£€æŸ¥å¹¶æ„å»º |
| `pnpm test:unit` | è¿è¡Œ Vitest å•å…ƒæµ‹è¯• |
| `pnpm preview` | é¢„è§ˆæ„å»ºç»“æœ |
| `pnpm type-check` | è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥ |

### å¼€å‘å·¥ä½œæµ

1. **æ·»åŠ æ–°åŠŸèƒ½**:
   ```typescript
   // 1. åœ¨ types/chess/index.ts å®šä¹‰ç±»å‹
   export interface NewFeature { }
   
   // 2. åœ¨ classes/chess/ å®ç°é€»è¾‘
   export class NewFeatureClass { }
   
   // 3. åœ¨ components/chess/ æ·»åŠ  UI
   // ChessBoard.vue
   
   // 4. ç¼–å†™æµ‹è¯•
   // classes/chess/__tests__/NewFeature.spec.ts
   ```

2. **ä¿®æ”¹æ¸¸æˆè§„åˆ™**:
   - æ›´æ–° `constants/chess/board.ts`ï¼ˆé…ç½®å¸¸é‡ï¼‰
   - ä¿®æ”¹ `MoveValidator.ts`ï¼ˆéªŒè¯é€»è¾‘ï¼‰
   - æ›´æ–° `GameEngine.ts`ï¼ˆæ¸¸æˆå¼•æ“ï¼‰
   - ä¿®æ”¹ `ChessBoard.vue`ï¼ˆUI å’Œè§„åˆ™é¢æ¿ï¼‰

3. **è°ƒè¯•æŠ€å·§**:
   ```typescript
   // GameEngine.ts ä¸­æ·»åŠ æ—¥å¿—
   console.log('Current state:', this.gameState)
   
   // ChessBoard.vue ä¸­ç›‘å¬çŠ¶æ€
   watch(gameState, (newState) => {
     console.log('Game state changed:', newState)
   })
   ```

### ä»£ç è§„èŒƒ

1. **TypeScript ç±»å‹**:
   - ä½¿ç”¨ `type-only` å¯¼å…¥: `import type { ... }`
   - æ‰€æœ‰å‡½æ•°éƒ½è¦æœ‰ç±»å‹æ³¨è§£
   - é¿å…ä½¿ç”¨ `any` ç±»å‹

2. **å‘½åçº¦å®š**:
   - ç±»å: PascalCaseï¼ˆå¦‚ `GameEngine`ï¼‰
   - æ–¹æ³•/å˜é‡: camelCaseï¼ˆå¦‚ `executeMove`ï¼‰
   - å¸¸é‡: UPPER_SNAKE_CASEï¼ˆå¦‚ `BOARD_SIZE`ï¼‰
   - æ¥å£: PascalCaseï¼ˆå¦‚ `GameState`ï¼‰

3. **æ³¨é‡Š**:
   - ç±»å’Œå…¬å…±æ–¹æ³•ä½¿ç”¨ JSDoc æ³¨é‡Š
   - å…³é”®é€»è¾‘æ·»åŠ ä¸­æ–‡æ³¨é‡Š
   - å¤æ‚ç®—æ³•æ·»åŠ ç¤ºä¾‹

---

## API æ–‡æ¡£

### GameEngine API

#### `initializeGameState(): GameState`

åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€ï¼Œåˆ›å»ºæ£‹ç›˜å’Œæ£‹å­ã€‚

**è¿”å›**: åˆå§‹åŒ–çš„æ¸¸æˆçŠ¶æ€

**ç¤ºä¾‹**:
```typescript
const engine = new GameEngine()
const state = engine.initializeGameState()
```

#### `executeMove(piece: ChessPiece, toPosition: Position, newRotation?: Rotation): boolean`

æ‰§è¡Œæ£‹å­ç§»åŠ¨ï¼Œç§»åŠ¨åè‡ªåŠ¨åˆ‡æ¢å›åˆã€‚

**å‚æ•°**:
- `piece`: è¦ç§»åŠ¨çš„æ£‹å­
- `toPosition`: ç›®æ ‡ä½ç½®
- `newRotation`: å¯é€‰çš„æ–°æ—‹è½¬è§’åº¦

**è¿”å›**: `true` ç§»åŠ¨æˆåŠŸï¼Œ`false` ç§»åŠ¨å¤±è´¥

**ç¤ºä¾‹**:
```typescript
const piece = gameState.player1Pieces[0]
const success = engine.executeMove(piece, { row: 1, col: 0 })

// ç›¸é‚»ç§»åŠ¨æ—¶å¯æ—‹è½¬
const successWithRotate = engine.executeMove(piece, { row: 1, col: 0 }, 90)
```

#### `rotatePiece(piece: ChessPiece): boolean`

æ—‹è½¬æ£‹å­ï¼ˆä»…é¸Ÿç±»å¯åŸåœ°æ—‹è½¬ï¼‰ï¼Œæ—‹è½¬ååˆ‡æ¢å›åˆã€‚

**å‚æ•°**:
- `piece`: è¦æ—‹è½¬çš„æ£‹å­

**è¿”å›**: `true` æ—‹è½¬æˆåŠŸï¼Œ`false` æ—‹è½¬å¤±è´¥

**ç¤ºä¾‹**:
```typescript
const birdPiece = gameState.player1Pieces[3] // å‡è®¾æ˜¯é¸Ÿç±»
const success = engine.rotatePiece(birdPiece)
```

#### `getGameState(): GameState`

è·å–å½“å‰æ¸¸æˆçŠ¶æ€ï¼ˆåªè¯»ï¼‰ã€‚

**è¿”å›**: å½“å‰æ¸¸æˆçŠ¶æ€

#### `undoMove(): boolean`

æ’¤é”€ä¸Šä¸€æ­¥ç§»åŠ¨ã€‚

**è¿”å›**: `true` æ’¤é”€æˆåŠŸï¼Œ`false` æ— æ³•æ’¤é”€

---

### MoveValidator API

#### `validateMove(piece, toPosition, board, newRotation?): MoveValidation`

éªŒè¯ç§»åŠ¨æ˜¯å¦åˆæ³•ã€‚

**å‚æ•°**:
- `piece`: ChessPiece - è¦ç§»åŠ¨çš„æ£‹å­
- `toPosition`: Position - ç›®æ ‡ä½ç½®
- `board`: BoardCell[][] - å½“å‰æ£‹ç›˜
- `newRotation`: Rotation (å¯é€‰) - æ–°æ—‹è½¬è§’åº¦

**è¿”å›**: MoveValidation
```typescript
interface MoveValidation {
  valid: boolean
  reason?: string  // å¤±è´¥åŸå› 
}
```

**éªŒè¯è§„åˆ™**:
1. æ£‹å­å¿…é¡»åœ¨æ£‹ç›˜ä¸Š
2. ç›®æ ‡ä½ç½®å¿…é¡»æœ‰æ•ˆ
3. å¿…é¡»æ²¿ç›´çº¿æˆ–å¯¹è§’çº¿ç§»åŠ¨
4. ç›®æ ‡æ ¼å­å¿…é¡»ä¸ºç©º
5. è·ç¦» > 1 æ—¶ä¸å¯æ—‹è½¬

#### `getPossibleMoves(piece, board, includeRotations?): Move[]`

è·å–æ£‹å­çš„æ‰€æœ‰å¯èƒ½ç§»åŠ¨ã€‚

**å‚æ•°**:
- `piece`: ChessPiece - è¦æ£€æŸ¥çš„æ£‹å­
- `board`: BoardCell[][] - å½“å‰æ£‹ç›˜
- `includeRotations`: boolean (é»˜è®¤ true) - æ˜¯å¦åŒ…å«æ—‹è½¬é€‰é¡¹

**è¿”å›**: Move[]
```typescript
interface Move {
  from: Position
  to: Position
  rotation?: Rotation
}
```

**ç”¨é€”**: ç”¨äº UI æç¤ºå¯ç§»åŠ¨ä½ç½®ï¼ˆç»¿è‰²åœ†åœˆï¼‰

#### `calculateChebyshevDistance(from, to): number`

è®¡ç®—åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼ˆå«å¯¹è§’çº¿ï¼‰ã€‚

**å…¬å¼**: `max(|row1 - row2|, |col1 - col2|)`

**ç¤ºä¾‹**:
```typescript
const dist = MoveValidator.calculateChebyshevDistance(
  { row: 0, col: 0 },
  { row: 2, col: 1 }
) // è¿”å› 2
```

---

## æµ‹è¯•è¯´æ˜

### å•å…ƒæµ‹è¯•

é¡¹ç›®ä½¿ç”¨ **Vitest** è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚

**è¿è¡Œæµ‹è¯•**:
```bash
pnpm test:unit
```

**æµ‹è¯•æ–‡ä»¶ä½ç½®**:
```
src/classes/chess/__tests__/
â”œâ”€â”€ EdgeMatcher.spec.ts
â”œâ”€â”€ MoveValidator.spec.ts (å¾…æ·»åŠ )
â”œâ”€â”€ Board.spec.ts (å¾…æ·»åŠ )
â””â”€â”€ GameEngine.spec.ts (å¾…æ·»åŠ )
```

### æµ‹è¯•ç¤ºä¾‹

```typescript
// EdgeMatcher.spec.ts
import { describe, it, expect } from 'vitest'
import { EdgeMatcher } from '../EdgeMatcher'

describe('EdgeMatcher', () => {
  it('åº”æ­£ç¡®åŒ¹é…å‡¸ä¸å‡¹', () => {
    expect(EdgeMatcher.canMatch('1+', '1-')).toBe(true)
  })

  it('ä¸åº”åŒ¹é…ä¸åŒç±»å‹', () => {
    expect(EdgeMatcher.canMatch('1+', '1`-')).toBe(false)
  })
})
```

### åŠŸèƒ½æµ‹è¯•

ç”±äºæ¸¸æˆçš„äº¤äº’æ€§ï¼Œå»ºè®®è¿›è¡Œ**æ‰‹åŠ¨åŠŸèƒ½æµ‹è¯•**ï¼š

**æµ‹è¯•æ¸…å•**:
- [ ] æ£‹å­é€‰æ‹©ï¼ˆç‚¹å‡»é«˜äº®ï¼‰
- [ ] ç§»åŠ¨æç¤ºï¼ˆç»¿è‰²åœ†åœˆï¼‰
- [ ] åˆæ³•ç§»åŠ¨ï¼ˆ8 æ–¹å‘ï¼‰
- [ ] éæ³•ç§»åŠ¨ï¼ˆè¢«é˜»æ­¢ï¼‰
- [ ] ç›¸é‚»ç§»åŠ¨æ—‹è½¬ï¼ˆæŒ‰ R é”®ï¼‰
- [ ] è¿œè·ç¦»ç§»åŠ¨ä¸å¯æ—‹è½¬
- [ ] é¸Ÿç±»åŸåœ°æ—‹è½¬
- [ ] å›åˆè‡ªåŠ¨åˆ‡æ¢
- [ ] èƒœåˆ©æ¡ä»¶æ£€æµ‹
- [ ] æ‚”æ£‹åŠŸèƒ½
- [ ] é‡ç½®æ¸¸æˆ

---

## ç‰ˆæœ¬å†å²

### v1.0 - ç®€åŒ–ç‰ˆæœ¬ï¼ˆå½“å‰ï¼‰- 2025-10-17

**æ ¸å¿ƒæœºåˆ¶**:
- âœ… ä¸€å›åˆä¸€åŠ¨ä½œï¼ˆç§»åŠ¨æˆ–æ—‹è½¬ï¼‰
- âœ… ç§»åŠ¨åè‡ªåŠ¨åˆ‡æ¢å›åˆ
- âœ… ç§»é™¤è¡ŒåŠ¨åŠ›ç³»ç»Ÿ

**ç§»åŠ¨è§„åˆ™**:
- âœ… æ— è·ç¦»é™åˆ¶ï¼Œå¯ç§»åŠ¨åˆ°ä»»æ„ç©ºä½ç½®
- âœ… å¿…é¡»æ²¿ç›´çº¿æˆ–å¯¹è§’çº¿ï¼ˆ8 æ–¹å‘ï¼‰
- âœ… ç›®æ ‡å¿…é¡»ä¸ºç©ºï¼ˆä¸å¯é‡å ï¼‰

**æ—‹è½¬è§„åˆ™**:
- âœ… ç›¸é‚»ç§»åŠ¨ï¼ˆè·ç¦»=1ï¼‰å¯æ—‹è½¬
- âœ… è¿œè·ç¦»ç§»åŠ¨ï¼ˆè·ç¦»>1ï¼‰ä¸å¯æ—‹è½¬
- âœ… é¸Ÿç±»å¯åŸåœ°æ—‹è½¬

**æ–‡æ¡£**:
- âœ… åˆ›å»ºå®Œæ•´æ¸¸æˆè§„åˆ™æ–‡æ¡£
- âœ… åˆå¹¶æ‰€æœ‰é¡¹ç›®æ–‡æ¡£

---

### v0.5 - è¡ŒåŠ¨åŠ›ç³»ç»Ÿï¼ˆå·²åºŸå¼ƒï¼‰- 2025-10-16

- âŒ æ¯å›åˆ 3 ç‚¹è¡ŒåŠ¨åŠ›
- âŒ ç§»åŠ¨æ¶ˆè€— 1 ç‚¹è¡ŒåŠ¨åŠ›
- âŒ æ¯å›åˆé™æ—‹è½¬ 1 æ¬¡
- åŸå› ï¼šè§„åˆ™è¿‡äºå¤æ‚ï¼Œç®€åŒ–ä¸º v1.0

---

### v0.4 - è‡ªç”±ç§»åŠ¨æ¨¡å¼ï¼ˆå·²åºŸå¼ƒï¼‰- 2025-10-15

- âŒ æ— è·ç¦»é™åˆ¶
- âŒ å…è®¸é‡å å †å 
- âŒ ç§»é™¤è¾¹ç¼˜åŒ¹é…
- åŸå› ï¼šç¼ºä¹ç­–ç•¥æ€§ï¼Œæ”¹è¿›ä¸º v0.5

---

### MVP 1.0 å®Œæˆï¼ˆ2025-10-16ï¼‰

**å·²å®ŒæˆåŠŸèƒ½**:
- âœ… æ ¸å¿ƒæ¸¸æˆå¼•æ“
- âœ… ç§»åŠ¨éªŒè¯ç³»ç»Ÿ
- âœ… æ£‹ç›˜ç®¡ç†
- âœ… UI ç»„ä»¶ï¼ˆChessBoard.vueï¼‰
- âœ… ç©å®¶æŒ‡ç¤ºå™¨
- âœ… ç§»åŠ¨æç¤ºåŠŸèƒ½
- âœ… è§„åˆ™é¢æ¿
- âœ… æ—‹è½¬æ§åˆ¶

**UI ä¼˜åŒ–**:
- âœ… åˆ é™¤æ£‹å­å‘¼å¸åŠ¨ç”»
- âœ… è§„åˆ™é¢æ¿å®½åº¦ä¼˜åŒ–ï¼ˆ320px â†’ 420pxï¼‰
- âœ… ç©å®¶å½’å±è§†è§‰æŒ‡ç¤ºå™¨ï¼ˆå½©è‰²è¾¹æ¡†ï¼‰

---

## é™„å½•

### å¸¸è§é—®é¢˜ FAQ

**Q: ä¸ºä»€ä¹ˆæ²¡æœ‰ä½¿ç”¨ Pinia çŠ¶æ€ç®¡ç†ï¼Ÿ**  
A: æ¸¸æˆé€»è¾‘é‡‡ç”¨ OOP è®¾è®¡ï¼ŒGameEngine ç±»å°è£…äº†æ‰€æœ‰çŠ¶æ€ï¼Œæ— éœ€é¢å¤–çš„çŠ¶æ€ç®¡ç†åº“ã€‚

**Q: è¾¹ç¼˜åŒ¹é…åŠŸèƒ½ä»€ä¹ˆæ—¶å€™å¯ç”¨ï¼Ÿ**  
A: å½“å‰ç‰ˆæœ¬ä¸ºè‡ªç”±æ¨¡å¼ï¼Œè¾¹ç¼˜åŒ¹é…å·²å®ç°ä½†æœªå¯ç”¨ã€‚æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šæ·»åŠ ä¸ºé«˜çº§æ¨¡å¼ã€‚

**Q: å¦‚ä½•æ·»åŠ æ–°çš„æ£‹å­ç±»å‹ï¼Ÿ**  
A: åœ¨ `constants/chess/pieces.ts` ä¸­å®šä¹‰æ–°çš„ `PIECE_DEFINITIONS`ï¼Œç„¶ååœ¨ `PieceManager` ä¸­å¤„ç†åˆ›å»ºé€»è¾‘ã€‚

**Q: å¦‚ä½•ä¿®æ”¹æ£‹ç›˜å¤§å°ï¼Ÿ**  
A: ä¿®æ”¹ `constants/chess/board.ts` ä¸­çš„ `BOARD_SIZE` å¸¸é‡ï¼Œå¹¶è°ƒæ•´èµ·å§‹è¡Œé…ç½®ã€‚

**Q: æµ‹è¯•è¦†ç›–ç‡å¦‚ä½•ï¼Ÿ**  
A: å½“å‰ä»…æœ‰ EdgeMatcher çš„å•å…ƒæµ‹è¯•ï¼Œå»ºè®®æ·»åŠ æ›´å¤šæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘ã€‚

### æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| **å›åˆ** | ä¸€ä¸ªç©å®¶çš„å®Œæ•´è¡ŒåŠ¨å‘¨æœŸï¼ˆä¸€ä¸ªåŠ¨ä½œï¼‰ |
| **åŠ¨ä½œ** | ç§»åŠ¨æˆ–æ—‹è½¬ |
| **ç›¸é‚»ç§»åŠ¨** | ç§»åŠ¨åˆ°å‘¨å›´ 8 æ ¼ä¹‹ä¸€ï¼ˆè·ç¦» = 1ï¼‰ |
| **è¿œè·ç¦»ç§»åŠ¨** | ç§»åŠ¨è·ç¦» > 1 æ ¼ |
| **åˆ‡æ¯”é›ªå¤«è·ç¦»** | åŒ…å«å¯¹è§’çº¿çš„è·ç¦»è®¡ç®—æ–¹å¼ |
| **é¸Ÿç±»æ£‹å­** | å¯ä»¥åŸåœ°æ—‹è½¬çš„ç‰¹æ®Šæ£‹å­ï¼ˆèµ„æº 4ï¼‰ |
| **èµ·å§‹è¡Œ** | ç©å®¶å¼€å±€æ—¶æ£‹å­æ‰€åœ¨çš„è¡Œ |
| **ç›®æ ‡è¡Œ** | ç©å®¶éœ€è¦æŠµè¾¾çš„å¯¹æ–¹èµ·å§‹è¡Œ |
| **OOP** | é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programmingï¼‰ |
| **MVP** | æœ€å°å¯è¡Œäº§å“ï¼ˆMinimum Viable Productï¼‰ |

### å‚è€ƒèµ„æ–™

- **Vue 3 å®˜æ–¹æ–‡æ¡£**: https://cn.vuejs.org/
- **TypeScript å®˜æ–¹æ–‡æ¡£**: https://www.typescriptlang.org/
- **Vite å®˜æ–¹æ–‡æ¡£**: https://cn.vitejs.dev/
- **Vitest å®˜æ–¹æ–‡æ¡£**: https://cn.vitest.dev/

---

**é¡¹ç›®ç»´æŠ¤è€…**: [Your Name]  
**è®¸å¯è¯**: MIT  
**æœ€åæ›´æ–°**: 2025-10-17

---

> ğŸ“ **æ–‡æ¡£è¯´æ˜**: æœ¬æ–‡æ¡£æ•´åˆäº†é¡¹ç›®çš„æ‰€æœ‰æ ¸å¿ƒä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¸¸æˆè§„åˆ™ã€æŠ€æœ¯æ¶æ„ã€å¼€å‘æŒ‡å—ã€API æ–‡æ¡£ç­‰ã€‚å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒæºä»£ç æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚
